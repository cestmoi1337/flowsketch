(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{207:function(e,t,s){Promise.resolve().then(s.bind(s,8688))},8688:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),l=s(2265),r=s(7082),n=s(8440),i=s(6554),d=s(4281);s(6556);var o=s(3732),c=s(3375),p=s(1994);let x=["if","test","check","review"],h=["create","design","draft","review","approve","plan","define","build","test","deploy","release","audit","publish"];function u(e){return e.split("\n").map(e=>e.trim()).filter(e=>e.length>0).map((e,t)=>{var s,a;let l=Array.from(e.matchAll(RegExp("#([\\p{L}\\p{N}_-]+)","gu"))).map(e=>e[1]),r=e.match(/^\{(pill|process|wave|diamond)\}\s*/i),n=r?r[1].toLowerCase():void 0,i=r?e.replace(r[0],"").trim():e,d=null===(s=e.split(/\s+/)[0])||void 0===s?void 0:s.toLowerCase(),o=h.includes(d)?d:void 0,c=e.match(/^if\s+(.+?)\s+then\s+(.+?)(?:\s+else\s+(.+))?$/i),p=!!c||e.startsWith("?")||x.some(t=>e.toLowerCase().startsWith(t)),u=c?c[2].trim():void 0,g=c?null===(a=c[3])||void 0===a?void 0:a.trim():void 0,m=c&&c[1]?c[1].trim():i.replace(/^\?/,"").replace(RegExp("#([\\p{L}\\p{N}_-]+)","gu"),"").trim(),f=n||(p?"diamond":["create","design","draft","build","implement","deploy","order"].includes(d||"")?"process":["call","meet"].includes(d||"")?"pill":["report","form","document"].includes(d||"")?"wave":"process");return{id:"node-".concat(t+1),label:p?m:i.replace(RegExp("#([\\p{L}\\p{N}_-]+)","gu"),"").trim(),group:l[0],verb:o,kind:p?"decision":"task",branchYes:u,branchNo:g,shape:f}})}let g=e=>{let{shape:t,label:s}=e,l="#6ea8ff",r="#fff";if("diamond"===t)return(0,a.jsxs)("svg",{width:160,height:90,viewBox:"0 0 160 90",className:"drop-shadow-[0_8px_18px_rgba(15,23,42,0.12)]",children:[(0,a.jsx)("polygon",{points:"80,0 160,45 80,90 0,45",fill:r,stroke:l,strokeWidth:2}),s&&(0,a.jsx)("text",{x:"80",y:"52",textAnchor:"middle",fontSize:"14",fill:"#0f172a",fontWeight:"600",children:s})]});if("wave"===t)return(0,a.jsxs)("svg",{width:220,height:100,viewBox:"0 0 220 100",className:"drop-shadow-[0_8px_18px_rgba(15,23,42,0.12)]",children:[(0,a.jsx)("path",{d:"M0,25 C40,45 80,5 120,25 L220,25 L220,100 L0,100 Z",fill:r,stroke:l,strokeWidth:2,rx:14}),(0,a.jsx)("rect",{x:"0",y:"25",width:"220",height:"75",fill:r,stroke:"none"}),s&&(0,a.jsx)("text",{x:"110",y:"65",textAnchor:"middle",fontSize:"14",fill:"#0f172a",fontWeight:"600",children:s})]});let n="pill"===t?999:12;return(0,a.jsxs)("svg",{width:220,height:70,viewBox:"0 0 220 70",className:"drop-shadow-[0_8px_18px_rgba(15,23,42,0.12)]",children:[(0,a.jsx)("rect",{x:"0",y:"0",width:"220",height:"70",rx:n,ry:n,fill:r,stroke:l,strokeWidth:2}),s&&(0,a.jsx)("text",{x:"110",y:"40",textAnchor:"middle",fontSize:"14",fill:"#0f172a",fontWeight:"600",children:s})]})},m={width:10,height:10,background:"#0f172a",border:"2px solid #fff",boxShadow:"0 0 0 2px #0f172a",zIndex:2},f=(e,t)=>{if("diamond"!==e)return m;let s={...m,position:"absolute"};return"t"===t?{...s,top:"-10px",left:"50%",transform:"translateX(-50%)"}:"b"===t?{...s,bottom:"-10px",left:"50%",transform:"translateX(-50%)"}:"l"===t?{...s,left:"-10px",top:"50%",transform:"translateY(-50%)"}:"r"===t?{...s,right:"-10px",top:"50%",transform:"translateY(-50%)"}:s},b="Create project outline\nIdentify stakeholders #team\nDraft requirements\nReview with leads\nDesign solution #design\nBuild prototype\nTest internally\nDeploy to staging\nCollect feedback\nShip to production",k={editableNode:function(e){let{data:t}=e,[s,n]=(0,l.useState)(!1),[i,d]=(0,l.useState)(t.label),o=()=>{let e=i.trim();t.onChange(e.length?e:t.label),n(!1)};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.HH,{type:"target",position:r.Ly.Top,id:"t",style:f(t.shape,"t")}),(0,a.jsx)(r.HH,{type:"target",position:r.Ly.Left,id:"l",style:f(t.shape,"l")}),(0,a.jsx)(r.HH,{type:"target",position:r.Ly.Right,id:"r",style:f(t.shape,"r")}),(0,a.jsx)(r.HH,{type:"target",position:r.Ly.Bottom,id:"b",style:f(t.shape,"b")}),(0,a.jsx)(r.HH,{type:"source",position:r.Ly.Top,id:"st",style:f(t.shape,"t")}),(0,a.jsx)(r.HH,{type:"source",position:r.Ly.Left,id:"sl",style:f(t.shape,"l")}),(0,a.jsx)(r.HH,{type:"source",position:r.Ly.Right,id:"sr",style:f(t.shape,"r")}),(0,a.jsx)(r.HH,{type:"source",position:r.Ly.Bottom,id:"sb",style:f(t.shape,"b")}),(0,a.jsxs)("div",{className:"px-2 py-2",onDoubleClick:()=>n(!0),children:[(0,a.jsx)(g,{shape:t.shape||("decision"===t.kind?"diamond":"process"),label:s?void 0:t.label}),s&&(0,a.jsx)("input",{autoFocus:!0,className:"absolute left-1/2 top-1/2 w-[180px] -translate-x-1/2 -translate-y-1/2 rounded-lg border border-border-light bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-accent focus:ring-2 focus:ring-accent/30",value:i,onChange:e=>d(e.target.value),onBlur:o,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),o()),"Escape"===e.key&&(d(t.label),n(!1))}})]})]})}};function j(e,t){let s=[],a=[],l=[];return e.forEach((r,n)=>{let i=160*n,d=e[n+1],o=e=>{t&&l.forEach(t=>{a.push({id:"".concat(t,"-").concat(e),source:t,sourceHandle:"sb",target:e,targetHandle:"t",type:"smoothstep",animated:!1,style:{strokeWidth:2}})})};if("decision"===r.kind){let e=[...l],n=r.id;s.push({id:n,type:"editableNode",position:{x:0,y:i},data:{label:r.label,group:r.group,verb:r.verb,kind:"decision",shape:"diamond"},style:{borderStyle:"solid",borderColor:"#cbd5e1",background:"white"}}),o(n),t&&d&&a.push({id:"".concat(n,"-").concat(d.id,"-yes"),source:n,sourceHandle:"sr",target:d.id,targetHandle:"t",type:"smoothstep",label:"Yes",animated:!1,style:{strokeWidth:2}});let c=e[e.length-1];t&&c&&a.push({id:"".concat(n,"-").concat(c,"-no"),source:n,sourceHandle:"sl",target:c,targetHandle:"t",type:"smoothstep",label:"No",animated:!1,style:{strokeWidth:2}}),l=t?[]:[n]}else{let e=r.id;s.push({id:e,type:"editableNode",position:{x:0,y:i},data:{label:r.label,group:r.group,verb:r.verb,kind:"task",shape:r.shape||"process"}}),o(e),l=[e]}}),{nodes:s,edges:a}}function y(){let[e,t]=(0,l.useState)("light"),[s,x]=(0,l.useState)(b),[h,g]=(0,l.useState)(()=>j(u(b),!0)),m=(0,l.useRef)(h),[f,y]=(0,l.useState)([h]),[N,v]=(0,l.useState)(0),[w,C]=(0,l.useState)(null),[E,S]=(0,l.useState)(10),[L,H]=(0,l.useState)(!0),[_,D]=(0,l.useState)(!0),R=(0,l.useRef)(null),[W,T]=(0,l.useState)([]),[B,A]=(0,l.useState)([]);(0,l.useEffect)(()=>{m.current=h},[h]);let G=(0,l.useCallback)(e=>{g(e),y(t=>[...t.slice(0,N+1),e]),v(e=>e+1)},[N]),P=(0,l.useCallback)(()=>{v(e=>{if(e<=0)return e;let t=e-1;return g(f[t]),t})},[f]),z=(0,l.useCallback)(()=>{v(e=>{if(e>=f.length-1)return e;let t=e+1;return g(f[t]),t})},[f]);(0,l.useEffect)(()=>{document.documentElement.classList.toggle("dark","dark"===e)},[e]),(0,l.useEffect)(()=>{let e=e=>{if("Delete"!==e.key&&"Backspace"!==e.key||0===W.length&&0===B.length)return;let t=m.current,s=new Set(W),a=new Set(B);G({nodes:t.nodes.filter(e=>!s.has(e.id)),edges:t.edges.filter(e=>!a.has(e.id)&&!s.has(e.source)&&!s.has(e.target))})};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[W,B,G]);let F=(0,l.useCallback)(e=>{let t=m.current;G({...t,nodes:(0,r.Fb)(e,t.nodes)})},[G]),I=(0,l.useCallback)(e=>{let t=m.current;G({...t,edges:(0,r.yn)(e,t.edges)})},[G]),M=(0,l.useCallback)((e,t)=>{let s=m.current;G({...s,edges:(0,r.sN)(e,t,s.edges)})},[G]),O=(0,l.useCallback)(e=>{T(e.nodes.map(e=>e.id)),A(e.edges.map(e=>e.id))},[]),Y=(0,l.useCallback)(e=>{let t=new Set(e.map(e=>e.id)),s=m.current;G({nodes:s.nodes.filter(e=>!t.has(e.id)),edges:s.edges.filter(e=>!t.has(e.source)&&!t.has(e.target))})},[G]);(0,l.useCallback)(e=>{let t=m.current;G({...t,edges:t.edges.filter(t=>t.id!==e)})},[G]);let Z=(0,l.useCallback)(e=>{let t=m.current;G({...t,edges:(0,r.Z_)({...e,type:"smoothstep"},t.edges)})},[G]),U=(0,l.useCallback)(()=>{let e=j(u(s),_),t=m.current;G({nodes:e.nodes,edges:_?e.edges:t.edges})},[s,_,G]),V=(0,l.useCallback)((e,t)=>{let s=m.current;G({...s,nodes:s.nodes.map(s=>s.id===e?{...s,data:{...s.data,label:t}}:s)})},[G]),q=h.nodes.length>0,K=N>0,X=N<f.length-1,$=(0,l.useCallback)(async t=>{if(!R.current||!q)return;C(t);let s=R.current,{width:a,height:l}=s.getBoundingClientRect(),r="dark"===e?"#0f172a":"#f8fafc";try{if("png"===t){let e=await (0,o.YM)(s,{backgroundColor:r,pixelRatio:2}),t=document.createElement("a");t.download="flowsketch.png",t.href=e,t.click()}if("svg"===t){let e=await (0,o.KT)(s,{backgroundColor:r}),t=document.createElement("a");t.download="flowsketch.svg",t.href=e,t.click()}if("pdf"===t){let e=await (0,o.YM)(s,{backgroundColor:r,pixelRatio:2}),t=a>l?"l":"p",n=new c.ZP({orientation:t,unit:"px",format:[a,l]});n.addImage(e,"PNG",0,0,a,l),n.save("flowsketch.pdf")}}finally{C(null)}},[q,e]),Q=(0,l.useMemo)(()=>{let e={};return h.nodes.forEach(t=>{var s;let a=null===(s=t.data)||void 0===s?void 0:s.group;a&&(e[a]=(e[a]||0)+1)}),e},[h.nodes]);return(0,a.jsxs)("div",{className:(0,p.Z)("min-h-screen bg-gradient-to-b from-white via-surface-light to-surface-light px-6 py-8 text-slate-900 transition dark:from-surface-dark dark:via-slate-950 dark:to-surface-dark","sm:px-10 lg:px-14"),children:[(0,a.jsxs)("header",{className:"mb-8 flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500 dark:text-slate-400",children:"FlowSketch"}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Paste → Generate → Export"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Turn rough task lists into clean, draggable workflow diagrams in seconds."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"btn-ghost",onClick:()=>t(e=>"light"===e?"dark":"light"),"aria-label":"Toggle theme",children:"light"===e?"\uD83C\uDF19 Dark":"☀️ Light"}),(0,a.jsx)("a",{className:"btn-primary",href:"https://github.com",target:"_blank",rel:"noreferrer",children:"Docs"})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(320px,380px)_1fr]",children:[(0,a.jsxs)("section",{className:"glass-panel h-fit",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-border-light px-6 py-4 dark:border-border-dark",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-500 dark:text-slate-400",children:"Input"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Tasks"})]}),(0,a.jsx)("button",{className:"btn-ghost text-xs",onClick:U,children:"Generate workflow"})]}),(0,a.jsxs)("div",{className:"space-y-4 p-6",children:[(0,a.jsx)("textarea",{className:"input-base h-[280px] font-mono text-sm",value:s,onChange:e=>x(e.target.value),placeholder:"Paste tasks, one per line..."}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[(0,a.jsxs)("span",{children:[h.nodes.length," nodes"]}),(0,a.jsx)("button",{className:"btn-ghost text-xs",onClick:()=>x(b),children:"Reset sample"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"glass-panel px-4 py-3",children:[(0,a.jsx)("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Auto-grouping"}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Verb detection + #hashtags stored for future lanes."}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:0===Object.entries(Q).length?(0,a.jsx)("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-[11px] text-slate-500 dark:bg-slate-800 dark:text-slate-400",children:"none detected"}):Object.entries(Q).map(e=>{let[t,s]=e;return(0,a.jsxs)("span",{className:"rounded-full bg-accent-soft px-2 py-1 text-[11px] text-accent",children:["#",t," (",s,")"]},t)})})]}),(0,a.jsxs)("div",{className:"glass-panel px-4 py-3",children:[(0,a.jsx)("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Tips"}),(0,a.jsxs)("ul",{className:"list-disc space-y-1 pl-4 text-slate-500 dark:text-slate-400",children:[(0,a.jsx)("li",{children:"Double-click a box to edit text"}),(0,a.jsx)("li",{children:"Drag nodes; connectors reroute automatically"}),(0,a.jsx)("li",{children:"Use #tags to hint grouping"})]})]}),(0,a.jsxs)("div",{className:"glass-panel px-4 py-3",children:[(0,a.jsx)("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Branching"}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Use IF/THEN/ELSE lines to create decisions automatically. Example: “IF approve THEN Ship ELSE Rework”. “if”, “test”, “check” also infer decisions."}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Connectors follow Yes/No automatically; both branches are created and linked forward. Click an edge to delete if needed."}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("label",{className:"inline-flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[(0,a.jsx)("input",{type:"checkbox",checked:_,onChange:e=>D(e.target.checked),className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Auto-connect sequentially"})]})})]}),(0,a.jsxs)("div",{className:"glass-panel px-4 py-3",children:[(0,a.jsx)("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Grid & snapping"}),(0,a.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400",children:[(0,a.jsx)("span",{className:"text-[12px] uppercase tracking-[0.08em]",children:"Size"}),(0,a.jsx)("input",{type:"number",min:4,max:80,value:E,onChange:e=>S(Math.min(80,Math.max(4,Number(e.target.value)||10))),className:"w-20 rounded-lg border border-border-light bg-white px-2 py-1 text-sm text-slate-900 outline-none focus:border-accent focus:ring-2 focus:ring-accent/30 dark:border-border-dark dark:bg-slate-900 dark:text-slate-100"}),(0,a.jsx)("span",{className:"text-xs text-slate-400",children:"px"})]})}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("label",{className:"inline-flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[(0,a.jsx)("input",{type:"checkbox",checked:L,onChange:e=>H(e.target.checked),className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Snap to grid"})]})})]})]})]})]}),(0,a.jsxs)("section",{className:"glass-panel relative min-h-[540px] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-border-light px-6 py-4 dark:border-border-dark",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-500 dark:text-slate-400",children:"Diagram"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Workflow preview"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"toolbar",children:[(0,a.jsx)("button",{className:"btn-ghost text-xs",onClick:P,disabled:!K,children:"Undo"}),(0,a.jsx)("button",{className:"btn-ghost text-xs",onClick:z,disabled:!X,children:"Redo"})]}),(0,a.jsxs)("div",{className:"toolbar",children:[(0,a.jsx)("button",{className:"btn-ghost text-xs",disabled:!q||!!w,onClick:()=>$("png"),children:"png"===w?"Exporting...":"PNG"}),(0,a.jsx)("button",{className:"btn-ghost text-xs",disabled:!q||!!w,onClick:()=>$("svg"),children:"svg"===w?"Exporting...":"SVG"}),(0,a.jsx)("button",{className:"btn-primary text-xs",disabled:!q||!!w,onClick:()=>$("pdf"),children:"pdf"===w?"Exporting...":"PDF"})]})]})]}),(0,a.jsx)("div",{className:"relative h-[620px] w-full",children:(0,a.jsx)("div",{ref:R,className:"h-full w-full",children:(0,a.jsxs)(r.x$,{nodes:h.nodes.map(e=>({...e,data:{...e.data,onChange:t=>V(e.id,t)}})),edges:h.edges,onNodesChange:F,onEdgesChange:I,onEdgeUpdate:M,onNodesDelete:Y,onConnect:Z,onSelectionChange:O,onEdgeDoubleClick:(e,t)=>{e.stopPropagation();let s="string"==typeof t.label?t.label:void 0,a=window.prompt("Connector label",s);if(null!==a){let e=m.current;G({...e,edges:e.edges.map(e=>e.id===t.id?{...e,label:a}:e)})}},nodeTypes:k,fitView:!0,fitViewOptions:{padding:.2},connectionMode:r.jD.Loose,edgeUpdaterRadius:12,snapToGrid:L,snapGrid:[E,E],defaultEdgeOptions:{markerEnd:{type:r.QZ.ArrowClosed,color:"dark"===e?"#e2e8f0":"#0f172a"},style:{stroke:"dark"===e?"#94a3b8":"#0f172a",strokeWidth:2}},children:[(0,a.jsx)(n.a,{pannable:!0,zoomable:!0,maskColor:"dark"===e?"#0f172acc":"#f8fafccc",nodeColor:()=>"dark"===e?"#334155":"#dbeafe"}),(0,a.jsx)(i.Z,{showInteractive:!1}),(0,a.jsx)(d.A,{gap:E,color:"dark"===e?"#475569":"#cbd5e1",size:1.2,style:{opacity:.9}})]})})})]})]})]})}function N(){return(0,a.jsx)(r.tV,{children:(0,a.jsx)(y,{})})}}},function(e){e.O(0,[627,780,505,673,971,117,744],function(){return e(e.s=207)}),_N_E=e.O()}]);